<div id="new-post">

  <%= form_for @topic.posts.new, remote: true, html: {id: 'post-form'} do |f| %>

    <%= render 'forum_posts/wysihtml5_menu' %>
    <%= f.text_area(:text, id: 'wysihtml5-textarea', class: 'input-block-level wysihtml5', rows: 6, placeholder: "Enter your text ...") %>
    <div class="form-actions">
      <%= f.hidden_field :forum_topic_id %>
      <%= hidden_field_tag 'image_ids' %>
      <%= f.submit 'Add post', id: 'submitBtn', class: 'btn', data: {'loading-text' => 'Posting...'} %>
    </div>
  <% end %>

  <script>
  var editor = new wysihtml5.Editor("wysihtml5-textarea", { // id of textarea element
    toolbar:      "toolbar", // id of toolbar element
    stylesheets:  "/assets/wysihtml5.css",
    parserRules:  wysihtml5ParserRules // defined in parser rules set 
  });
  </script>

</div>

<div id="imageModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3 id="imageModalLabel">Upload Image</h3>
  </div>
  <div class="modal-body">
    <%= form_for ForumImage.new, :html => {multipart: true, class: 'form-horizontal'}, :remote => true do |f| %>
      <p>
        <label>Pick a file:</label>
        <div class="fileupload fileupload-new" data-provides="fileupload">
          <div class="fileupload-new thumbnail" style="width: 50px; height: 50px;">
            <img src="http://www.placehold.it/50x50/EFEFEF/AAAAAA" />
          </div>
          <div class="fileupload-preview fileupload-exists thumbnail" style="width: 50px; height: 50px;"></div>
          <span class="btn btn-file">
            <span class="fileupload-new">Select image</span>
            <span class="fileupload-exists">Change</span>
            <%= f.file_field :image %>
          </span>
          <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
        </div> 
        <%= f.hidden_field :image_cache %>
      </p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <%= f.button 'Insert Image', class: 'btn btn-primary' %>
  </div>
    <% end %>
</div>
